<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Proyectos Geof√≠sicos | JOMA</title>
    <meta name="description" content="Calcula el costo de tu proyecto geof√≠sico con descuentos por volumen y claves Patreon exclusivas.">
    <meta name="keywords" content="calculadora geof√≠sica, presupuesto GPR, costo SEV, MASW precio, HVSR cotizaci√≥n">
    <link rel="stylesheet" href="styles.css">
    <style>
        .calculator-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .service-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .service-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .service-card.selected {
            border-color: #ff6b35;
            background: #fff8f5;
        }
        
        .service-card:hover {
            border-color: #ff6b35;
            transform: translateY(-2px);
        }
        
        .service-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .service-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.3rem;
        }
        
        .service-price {
            color: #ff6b35;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .quantity-input {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .quantity-input.show {
            display: block;
        }
        
        .input-group {
            margin-bottom: 1rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .input-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #ff6b35;
        }
        
        .promo-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .promo-code-input {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .promo-code-input input {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-transform: uppercase;
        }
        
        .apply-btn {
            padding: 0.8rem 1.5rem;
            background: #ff6b35;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .apply-btn:hover {
            background: #e55a2b;
        }
        
        .discount-info {
            margin-top: 1rem;
            padding: 1rem;
            background: #e8f5e8;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            display: none;
        }
        
        .discount-info.show {
            display: block;
        }
        
        .results-section {
            background: linear-gradient(135deg, #ff6b35, #ffa726);
            color: white;
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .cost-item {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }
        
        .cost-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }
        
        .cost-value {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .final-total {
            text-align: center;
            background: rgba(255,255,255,0.2);
            padding: 1.5rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .total-label {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .total-amount {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .savings-info {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .volume-discount-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #856404;
        }
        
        .patreon-tiers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .tier-card {
            text-align: center;
            padding: 0.8rem;
            border-radius: 8px;
            font-size: 0.85rem;
        }
        
        .tier-bronze { background: #cd7f32; color: white; }
        .tier-silver { background: #c0c0c0; color: #333; }
        .tier-gold { background: #ffd700; color: #333; }
        .tier-platinum { background: #e5e4e2; color: #333; }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <a href="index.html" class="logo">
                <img src="images_web/jomac.png" alt="JOMA Logo">
                <span>JOMA</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="geofisica.html">Geof√≠sica</a></li>
                <li><a href="coding.html">Programaci√≥n</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="social.html">Social</a></li>
                <li><a href="calculadora.html" class="active">Calculadora</a></li>
            </ul>
            <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
        </nav>
    </header>

    <!-- Hero -->
    <section class="hero">
        <div class="container">
            <h1>üßÆ Calculadora de Proyectos Geof√≠sicos</h1>
            <p class="subtitle">Calcula el costo de tu proyecto con descuentos por volumen y claves Patreon</p>
            <div class="breadcrumb">
                <a href="index.html">Inicio</a> > Calculadora
            </div>
        </div>
    </section>

    <!-- Calculadora Principal -->
    <section class="section">
        <div class="container">
            <div class="calculator-container">
                
                <!-- Selector de Servicios -->
                <h2 class="section-title mb-3">Selecciona los Servicios</h2>
                <div class="service-selector">
                    <div class="service-card" onclick="toggleService('gpr')">
                        <span class="service-icon">üì°</span>
                        <div class="service-name">GPR</div>
                        <div class="service-price">$50-83 MXN/m</div>
                    </div>
                    <div class="service-card" onclick="toggleService('sev')">
                        <span class="service-icon">‚ö°</span>
                        <div class="service-name">SEV</div>
                        <div class="service-price">$267-400 MXN/est</div>
                    </div>
                    <div class="service-card" onclick="toggleService('masw')">
                        <span class="service-icon">üìä</span>
                        <div class="service-name">MASW</div>
                        <div class="service-price">$67-117 MXN/m</div>
                    </div>
                    <div class="service-card" onclick="toggleService('tre')">
                        <span class="service-icon">üåç</span>
                        <div class="service-name">TRE</div>
                        <div class="service-price">$50-83 MXN/m</div>
                    </div>
                    <div class="service-card" onclick="toggleService('hvsr')">
                        <span class="service-icon">‚õèÔ∏è</span>
                        <div class="service-name">HVSR</div>
                        <div class="service-price">$400-833 MXN/est</div>
                    </div>
                </div>

                <!-- Inputs de Cantidad -->
                <div id="gpr-input" class="quantity-input">
                    <h3>üì° Ground Penetrating Radar (GPR)</h3>
                    <div class="input-group">
                        <label for="gpr-meters">Metros lineales:</label>
                        <input type="number" id="gpr-meters" min="0" placeholder="Ej: 500" oninput="calculateTotal()">
                    </div>
                </div>

                <div id="sev-input" class="quantity-input">
                    <h3>‚ö° Sondeos El√©ctricos Verticales (SEV)</h3>
                    <div class="input-group">
                        <label for="sev-stations">N√∫mero de estaciones:</label>
                        <input type="number" id="sev-stations" min="0" placeholder="Ej: 8" oninput="calculateTotal()">
                    </div>
                </div>

                <div id="masw-input" class="quantity-input">
                    <h3>üìä S√≠smica de Refracci√≥n (MASW)</h3>
                    <div class="input-group">
                        <label for="masw-meters">Metros lineales:</label>
                        <input type="number" id="masw-meters" min="0" placeholder="Ej: 240" oninput="calculateTotal()">
                    </div>
                </div>

                <div id="tre-input" class="quantity-input">
                    <h3>üåç Tomograf√≠a de Resistividad El√©ctrica (TRE)</h3>
                    <div class="input-group">
                        <label for="tre-meters">Metros lineales:</label>
                        <input type="number" id="tre-meters" min="0" placeholder="Ej: 120" oninput="calculateTotal()">
                    </div>
                </div>

                <div id="hvsr-input" class="quantity-input">
                    <h3>‚õèÔ∏è Microtremores H/V/S/R</h3>
                    <div class="input-group">
                        <label for="hvsr-stations">N√∫mero de estaciones:</label>
                        <input type="number" id="hvsr-stations" min="0" placeholder="Ej: 4" oninput="calculateTotal()">
                    </div>
                </div>

                <!-- Secci√≥n de C√≥digo Promocional -->
                <div class="promo-section">
                    <h3>üîë C√≥digo Promocional Patreon</h3>
                    
                    <!-- Informaci√≥n de Niveles -->
                    <div class="patreon-tiers">
                        <div class="tier-card tier-bronze">ü•â BRONZE<br>15% desc.</div>
                        <div class="tier-card tier-silver">ü•à SILVER<br>25% desc.</div>
                        <div class="tier-card tier-gold">ü•á GOLD<br>35% desc.</div>
                        <div class="tier-card tier-platinum">üíé PLATINUM<br>50% desc.</div>
                    </div>
                    
                    <div class="promo-code-input">
                        <input type="text" id="promo-code" placeholder="JOMA-GOLD-JUL25-001" maxlength="20">
                        <button class="apply-btn" onclick="applyPromoCode()">Aplicar</button>
                    </div>
                    
                    <div id="discount-info" class="discount-info">
                        <strong>‚úÖ C√≥digo v√°lido!</strong>
                        <div id="discount-details"></div>
                    </div>
                </div>

                <!-- Informaci√≥n de Descuento por Volumen -->
                <div id="volume-discount" class="volume-discount-info" style="display: none;">
                    <h4>üéØ Descuento por Volumen Aplicado</h4>
                    <p id="volume-details"></p>
                </div>

                <!-- Resultados -->
                <div class="results-section">
                    <h2 class="text-center mb-3">üí∞ Resumen del Proyecto</h2>
                    
                    <div class="cost-breakdown">
                        <div class="cost-item">
                            <div class="cost-label">Subtotal</div>
                            <div class="cost-value" id="subtotal">$0 MXN</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Desc. Patreon</div>
                            <div class="cost-value" id="patreon-discount">-$0 MXN</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Desc. Volumen</div>
                            <div class="cost-value" id="volume-discount-amount">-$0 MXN</div>
                        </div>
                        <div class="cost-item">
                            <div class="cost-label">Total Estudios</div>
                            <div class="cost-value" id="total-studies">0</div>
                        </div>
                    </div>
                    
                    <div class="final-total">
                        <div class="total-label">Total del Proyecto</div>
                        <div class="total-amount" id="final-total">$0 MXN</div>
                        <div class="savings-info" id="savings-info">¬°Obt√©n m√°s descuentos siendo patrocinador en Patreon!</div>
                    </div>
                    
                    <div class="text-center mt-3">
                        <a href="mailto:josegm@geofisa.com" class="btn btn-secondary">üìß Solicitar Cotizaci√≥n</a>
                        <a href="https://patreon.com/chemitas" target="_blank" class="btn btn-secondary">üíé Unirse a Patreon</a>
                        <a href="https://buymeacoffee.com/ingjoma" target="_blank" class="btn btn-secondary">‚òï Buy Me a Coffee</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="social-links">
                <a href="https://youtube.com/@jomageofisica" target="_blank">üì∫</a>
                <a href="https://www.instagram.com/joma_ing" target="_blank">üì∑</a>
                <a href="https://linkedin.com/in/josemaria-garcia-marquez" target="_blank">üíº</a>
                <a href="https://github.com/JoseMariaGarciaMarquez" target="_blank">üíª</a>
                <a href="https://www.reddit.com/user/Chemitatas/" target="_blank">ü§ñ</a>
                <a href="https://www.reddit.com/r/Geofisica/" target="_blank">üåç</a>
            </div>
            <p>&copy; 2025 Jos√© Mar√≠a Garc√≠a M√°rquez. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Precios base (promedio de rangos)
        const prices = {
            gpr: 66.5,    // Promedio de 50-83
            sev: 333.5,   // Promedio de 267-400
            masw: 92,     // Promedio de 67-117
            tre: 66.5,    // Promedio de 50-83 (igual que GPR)
            hvsr: 616.5   // Promedio de 400-833
        };

        // C√≥digos promocionales v√°lidos
        const promoCodes = {
            // Bronze (15%)
            'JOMA-BRONZE-JUL25-001': { type: 'bronze', discount: 0.15 },
            'JOMA-BRONZE-JUL25-002': { type: 'bronze', discount: 0.15 },
            'JOMA-BRONZE-JUL25-003': { type: 'bronze', discount: 0.15 },
            
            // Silver (25%)
            'JOMA-SILVER-JUL25-001': { type: 'silver', discount: 0.25 },
            'JOMA-SILVER-JUL25-002': { type: 'silver', discount: 0.25 },
            
            // Gold (35%)
            'JOMA-GOLD-JUL25-001': { type: 'gold', discount: 0.35 },
            'JOMA-GOLD-JUL25-002': { type: 'gold', discount: 0.35 },
            
            // Platinum (50%)
            'JOMA-PLATINUM-JUL25-001': { type: 'platinum', discount: 0.50 }
        };

        let selectedServices = new Set();
        let appliedPromoCode = null;

        function toggleService(serviceId) {
            const card = event.currentTarget;
            const input = document.getElementById(serviceId + '-input');
            
            if (selectedServices.has(serviceId)) {
                selectedServices.delete(serviceId);
                card.classList.remove('selected');
                input.classList.remove('show');
                // Limpiar input
                const inputField = input.querySelector('input');
                inputField.value = '';
            } else {
                selectedServices.add(serviceId);
                card.classList.add('selected');
                input.classList.add('show');
            }
            
            calculateTotal();
        }

        function applyPromoCode() {
            const codeInput = document.getElementById('promo-code');
            const code = codeInput.value.toUpperCase().trim();
            const discountInfo = document.getElementById('discount-info');
            const discountDetails = document.getElementById('discount-details');
            
            if (promoCodes[code]) {
                appliedPromoCode = promoCodes[code];
                discountInfo.classList.add('show');
                
                const typeMap = {
                    'bronze': 'ü•â BRONZE',
                    'silver': 'ü•à SILVER', 
                    'gold': 'ü•á GOLD',
                    'platinum': 'üíé PLATINUM'
                };
                
                discountDetails.innerHTML = `
                    Nivel: ${typeMap[appliedPromoCode.type]}<br>
                    Descuento: ${(appliedPromoCode.discount * 100)}%
                `;
                
                codeInput.style.borderColor = '#4caf50';
                calculateTotal();
            } else {
                discountInfo.classList.remove('show');
                codeInput.style.borderColor = '#f44336';
                appliedPromoCode = null;
                calculateTotal();
            }
        }

        function calculateVolumeDiscount(totalStudies) {
            if (totalStudies >= 16) return 0.15;
            if (totalStudies >= 9) return 0.10;
            if (totalStudies >= 4) return 0.05;
            return 0;
        }

        function calculateTotal() {
            let subtotal = 0;
            let totalStudies = 0;
            
            // Calcular subtotal
            if (selectedServices.has('gpr')) {
                const meters = parseFloat(document.getElementById('gpr-meters').value) || 0;
                subtotal += meters * prices.gpr;
                if (meters > 0) totalStudies += Math.ceil(meters / 100); // Cada 100m = 1 estudio
            }
            
            if (selectedServices.has('sev')) {
                const stations = parseFloat(document.getElementById('sev-stations').value) || 0;
                subtotal += stations * prices.sev;
                totalStudies += stations;
            }
            
            if (selectedServices.has('masw')) {
                const meters = parseFloat(document.getElementById('masw-meters').value) || 0;
                subtotal += meters * prices.masw;
                if (meters > 0) totalStudies += Math.ceil(meters / 120); // Cada 120m = 1 l√≠nea
            }
            
            if (selectedServices.has('tre')) {
                const meters = parseFloat(document.getElementById('tre-meters').value) || 0;
                subtotal += meters * prices.tre;
                if (meters > 0) totalStudies += Math.ceil(meters / 120); // Cada 120m = 1 l√≠nea
            }
            
            if (selectedServices.has('hvsr')) {
                const stations = parseFloat(document.getElementById('hvsr-stations').value) || 0;
                subtotal += stations * prices.hvsr;
                totalStudies += stations;
            }
            
            // Calcular descuentos
            let patreonDiscount = 0;
            if (appliedPromoCode) {
                patreonDiscount = subtotal * appliedPromoCode.discount;
            }
            
            const volumeDiscountRate = calculateVolumeDiscount(totalStudies);
            const volumeDiscount = subtotal * volumeDiscountRate;
            
            const total = subtotal - patreonDiscount - volumeDiscount;
            const totalSavings = patreonDiscount + volumeDiscount;
            
            // Actualizar UI
            document.getElementById('subtotal').textContent = `$${subtotal.toLocaleString('es-MX', {minimumFractionDigits: 0})} MXN`;
            document.getElementById('patreon-discount').textContent = `-$${patreonDiscount.toLocaleString('es-MX', {minimumFractionDigits: 0})} MXN`;
            document.getElementById('volume-discount-amount').textContent = `-$${volumeDiscount.toLocaleString('es-MX', {minimumFractionDigits: 0})} MXN`;
            document.getElementById('total-studies').textContent = totalStudies;
            document.getElementById('final-total').textContent = `$${total.toLocaleString('es-MX', {minimumFractionDigits: 0})} MXN`;
            
            // Mostrar info de descuento por volumen
            const volumeInfo = document.getElementById('volume-discount');
            const volumeDetails = document.getElementById('volume-details');
            
            if (volumeDiscountRate > 0) {
                volumeInfo.style.display = 'block';
                volumeDetails.textContent = `${totalStudies} estudios = ${(volumeDiscountRate * 100)}% descuento adicional`;
            } else {
                volumeInfo.style.display = 'none';
            }
            
            // Actualizar mensaje de ahorro
            const savingsInfo = document.getElementById('savings-info');
            if (totalSavings > 0) {
                savingsInfo.textContent = `¬°Ahorraste $${totalSavings.toLocaleString('es-MX', {minimumFractionDigits: 0})} MXN en este proyecto!`;
            } else {
                savingsInfo.textContent = '¬°Obt√©n m√°s descuentos siendo patrocinador en Patreon!';
            }
        }

        function toggleMenu() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');
        }

        // Inicializar calculadora
        calculateTotal();
    </script>
</body>
</html>
